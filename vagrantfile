Vagrant.configure("2") do |config|
  config.vm.box = "ubuntu/focal64"
  config.vm.box_version = "20240821.0.1"

  nodes = [
    { name: "node1", ip: "192.168.0.18" },
    { name: "node2", ip: "192.168.0.19" },
    { name: "node3", ip: "192.168.0.20" }
  ]

  nodes.each do |node|
    config.vm.define node[:name] do |node_config|
      node_config.vm.hostname = node[:name]

      # Bridged network with static IP
      node_config.vm.network "public_network", ip: node[:ip], bridge: "enp0s3"  # You must replace with actual interface!

      node_config.vm.provider "virtualbox" do |vb|
        vb.name = node[:name]
        vb.memory = 3072
        vb.cpus = 2
      end

      # Optional: Shared folder
      node_config.vm.synced_folder "./shared", "/vagrant", create: true
    end
  end
end

